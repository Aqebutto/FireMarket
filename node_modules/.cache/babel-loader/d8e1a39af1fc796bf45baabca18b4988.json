{"ast":null,"code":"import _classCallCheck from \"/home/alex/Documents/CS/React/Fire Market/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/alex/Documents/CS/React/Fire Market/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/alex/Documents/CS/React/Fire Market/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/alex/Documents/CS/React/Fire Market/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/alex/Documents/CS/React/Fire Market/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/alex/Documents/CS/React/Fire Market/src/components/cart/CartItems.js\";\nimport React, { Component } from \"react\";\nimport auth from \"./../auth/auth-helper\";\nimport Card, { CardContent, CardMedia } from \"@material-ui/core/Card\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Divider from \"@material-ui/core/Divider\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport cart from \"./cart-helper.js\";\nimport { Link } from \"react-router-dom\";\n\nvar styles = function styles(theme) {\n  return {\n    card: {\n      margin: \"24px 0px\",\n      padding: \"16px 40px 60px 40px\",\n      backgroundColor: \"#80808017\"\n    },\n    title: {\n      margin: theme.spacing.unit * 2,\n      color: theme.palette.openTitle,\n      fontSize: \"1.2em\"\n    },\n    price: {\n      color: theme.palette.text.secondary,\n      display: \"inline\"\n    },\n    textField: {\n      marginLeft: theme.spacing.unit,\n      marginRight: theme.spacing.unit,\n      marginTop: 0,\n      width: 50\n    },\n    productTitle: {\n      fontSize: \"1.15em\",\n      marginBottom: \"5px\"\n    },\n    subheading: {\n      color: \"rgba(88, 114, 128, 0.67)\",\n      padding: \"8px 10px 0\",\n      cursor: \"pointer\",\n      display: \"inline-block\"\n    },\n    cart: {\n      width: \"100%\",\n      display: \"inline-flex\"\n    },\n    details: {\n      display: \"inline-block\",\n      width: \"100%\",\n      padding: \"4px\"\n    },\n    content: {\n      flex: \"1 0 auto\",\n      padding: \"16px 8px 0px\"\n    },\n    cover: {\n      width: 160,\n      height: 125,\n      margin: \"8px\"\n    },\n    itemTotal: {\n      float: \"right\",\n      marginRight: \"40px\",\n      fontSize: \"1.5em\",\n      color: \"rgb(72, 175, 148)\"\n    },\n    checkout: {\n      float: \"right\",\n      margin: \"24px\"\n    },\n    total: {\n      fontSize: \"1.2em\",\n      color: \"rgb(53, 97, 85)\",\n      marginRight: \"16px\",\n      fontWeight: \"600\",\n      verticalAlign: \"bottom\"\n    },\n    continueBtn: {\n      marginLeft: \"10px\"\n    },\n    itemShop: {\n      display: \"block\",\n      fontSize: \"0.90em\",\n      color: \"#78948f\"\n    },\n    removeButton: {\n      fontSize: \"0.8em\"\n    }\n  };\n};\n\nvar CartItems =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CartItems, _Component);\n\n  function CartItems() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CartItems);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CartItems)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      cartItems: []\n    };\n\n    _this.componentDidMount = function () {\n      _this.setState({\n        cartItems: cart.getCart()\n      });\n    };\n\n    _this.handleChange = function (index) {\n      return function (event) {\n        var cartItems = _this.state.cartItems;\n\n        if (event.target.value == 0) {\n          cartItems[index].quantity = 1;\n        } else {\n          cartItems[index].quantity = event.target.value;\n        }\n\n        _this.setState({\n          cartItems: cartItems\n        });\n\n        cart.updateCart(index, event.target.value);\n      };\n    };\n\n    _this.removeItem = function (index) {\n      return function (event) {\n        var cartItems = cart.removeItem(index);\n\n        if (cartItems.length == 0) {\n          _this.props.setCheckout(false);\n        }\n\n        _this.setState({\n          cartItems: cartItems\n        });\n      };\n    };\n\n    _this.openCheckout = function () {\n      _this.props.setCheckout(true);\n    };\n\n    return _this;\n  }\n\n  _createClass(CartItems, [{\n    key: \"getTotal\",\n    value: function getTotal() {\n      return this.state.cartItems.reduce(function (a, b) {\n        return a + b.quantity * b.product.price;\n      }, 0);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var classes = this.props.classes;\n      return React.createElement(Card, {\n        className: classes.card,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133\n        },\n        __self: this\n      }, React.createElement(Typography, {\n        type: \"title\",\n        className: classes.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134\n        },\n        __self: this\n      }, \"Shopping Cart\"), this.state.cartItems.length > 0 ? React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, this.state.cartItems.map(function (item, i) {\n        return React.createElement(\"span\", {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 141\n          },\n          __self: this\n        }, React.createElement(Card, {\n          className: classes.cart,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 142\n          },\n          __self: this\n        }, React.createElement(CardMedia, {\n          className: classes.cover,\n          image: \"/api/product/image/\" + item.product._id,\n          title: item.product.name,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        }), React.createElement(\"div\", {\n          className: classes.details,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 148\n          },\n          __self: this\n        }, React.createElement(CardContent, {\n          className: classes.content,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 149\n          },\n          __self: this\n        }, React.createElement(Link, {\n          to: \"/product/\" + item.product._id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 150\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          type: \"title\",\n          component: \"h3\",\n          className: classes.productTitle,\n          color: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 151\n          },\n          __self: this\n        }, item.product.name)), React.createElement(\"div\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 160\n          },\n          __self: this\n        }, React.createElement(Typography, {\n          type: \"subheading\",\n          component: \"h3\",\n          className: classes.price,\n          color: \"primary\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 161\n          },\n          __self: this\n        }, \"$ \", item.product.price), React.createElement(\"span\", {\n          className: classes.itemTotal,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 169\n          },\n          __self: this\n        }, \"$\", item.product.price * item.quantity), React.createElement(\"span\", {\n          className: classes.itemShop,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 172\n          },\n          __self: this\n        }, \"Shop: \", item.product.shop.name))), React.createElement(\"div\", {\n          className: classes.subheading,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 177\n          },\n          __self: this\n        }, \"Quantity:\", \" \", React.createElement(TextField, {\n          value: item.quantity,\n          onChange: _this2.handleChange(i),\n          type: \"number\",\n          inputProps: {\n            min: 1\n          },\n          className: classes.textField,\n          InputLabelProps: {\n            shrink: true\n          },\n          margin: \"normal\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 179\n          },\n          __self: this\n        }), React.createElement(Button, {\n          className: classes.removeButton,\n          color: \"primary\",\n          onClick: _this2.removeItem(i),\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 192\n          },\n          __self: this\n        }, \"x Remove\")))), React.createElement(Divider, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 202\n          },\n          __self: this\n        }));\n      }), React.createElement(\"div\", {\n        className: classes.checkout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        className: classes.total,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }, \"Total: $\", this.getTotal()), !this.props.checkout && (auth.isAuthenticated() ? React.createElement(Button, {\n        color: \"secondary\",\n        variant: \"raised\",\n        onClick: this.openCheckout,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, \"Checkout\") : React.createElement(Link, {\n        to: \"/signin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }, React.createElement(Button, {\n        color: \"primary\",\n        variant: \"raised\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, \"Sign in to checkout\"))), React.createElement(Link, {\n        to: \"/\",\n        className: classes.continueBtn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }, React.createElement(Button, {\n        variant: \"raised\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }, \"Continue Shopping\")))) : React.createElement(Typography, {\n        type: \"subheading\",\n        component: \"h3\",\n        color: \"primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, \"No items added to your cart.\"));\n    }\n  }]);\n\n  return CartItems;\n}(Component);\n\nCartItems.propTypes = {\n  classes: PropTypes.object.isRequired,\n  checkout: PropTypes.bool.isRequired,\n  setCheckout: PropTypes.func.isRequired\n};\nexport default withStyles(styles)(CartItems);","map":{"version":3,"sources":["/home/alex/Documents/CS/React/Fire Market/src/components/cart/CartItems.js"],"names":["React","Component","auth","Card","CardContent","CardMedia","Button","TextField","Typography","Divider","PropTypes","withStyles","cart","Link","styles","theme","card","margin","padding","backgroundColor","title","spacing","unit","color","palette","openTitle","fontSize","price","text","secondary","display","textField","marginLeft","marginRight","marginTop","width","productTitle","marginBottom","subheading","cursor","details","content","flex","cover","height","itemTotal","float","checkout","total","fontWeight","verticalAlign","continueBtn","itemShop","removeButton","CartItems","state","cartItems","componentDidMount","setState","getCart","handleChange","index","event","target","value","quantity","updateCart","removeItem","length","props","setCheckout","openCheckout","reduce","a","b","product","classes","map","item","i","_id","name","shop","min","shrink","getTotal","isAuthenticated","propTypes","object","isRequired","bool","func"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport auth from \"./../auth/auth-helper\";\nimport Card, { CardContent, CardMedia } from \"@material-ui/core/Card\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Divider from \"@material-ui/core/Divider\";\nimport PropTypes from \"prop-types\";\nimport { withStyles } from \"@material-ui/core/styles\";\nimport cart from \"./cart-helper.js\";\nimport { Link } from \"react-router-dom\";\n\nconst styles = theme => ({\n  card: {\n    margin: \"24px 0px\",\n    padding: \"16px 40px 60px 40px\",\n    backgroundColor: \"#80808017\"\n  },\n  title: {\n    margin: theme.spacing.unit * 2,\n    color: theme.palette.openTitle,\n    fontSize: \"1.2em\"\n  },\n  price: {\n    color: theme.palette.text.secondary,\n    display: \"inline\"\n  },\n  textField: {\n    marginLeft: theme.spacing.unit,\n    marginRight: theme.spacing.unit,\n    marginTop: 0,\n    width: 50\n  },\n  productTitle: {\n    fontSize: \"1.15em\",\n    marginBottom: \"5px\"\n  },\n  subheading: {\n    color: \"rgba(88, 114, 128, 0.67)\",\n    padding: \"8px 10px 0\",\n    cursor: \"pointer\",\n    display: \"inline-block\"\n  },\n  cart: {\n    width: \"100%\",\n    display: \"inline-flex\"\n  },\n  details: {\n    display: \"inline-block\",\n    width: \"100%\",\n    padding: \"4px\"\n  },\n  content: {\n    flex: \"1 0 auto\",\n    padding: \"16px 8px 0px\"\n  },\n  cover: {\n    width: 160,\n    height: 125,\n    margin: \"8px\"\n  },\n  itemTotal: {\n    float: \"right\",\n    marginRight: \"40px\",\n    fontSize: \"1.5em\",\n    color: \"rgb(72, 175, 148)\"\n  },\n  checkout: {\n    float: \"right\",\n    margin: \"24px\"\n  },\n  total: {\n    fontSize: \"1.2em\",\n    color: \"rgb(53, 97, 85)\",\n    marginRight: \"16px\",\n    fontWeight: \"600\",\n    verticalAlign: \"bottom\"\n  },\n  continueBtn: {\n    marginLeft: \"10px\"\n  },\n  itemShop: {\n    display: \"block\",\n    fontSize: \"0.90em\",\n    color: \"#78948f\"\n  },\n  removeButton: {\n    fontSize: \"0.8em\"\n  }\n});\n\nclass CartItems extends Component {\n  state = {\n    cartItems: []\n  };\n\n  componentDidMount = () => {\n    this.setState({ cartItems: cart.getCart() });\n  };\n\n  handleChange = index => event => {\n    let cartItems = this.state.cartItems;\n    if (event.target.value == 0) {\n      cartItems[index].quantity = 1;\n    } else {\n      cartItems[index].quantity = event.target.value;\n    }\n    this.setState({ cartItems: cartItems });\n    cart.updateCart(index, event.target.value);\n  };\n\n  getTotal() {\n    return this.state.cartItems.reduce((a, b) => {\n      return a + b.quantity * b.product.price;\n    }, 0);\n  }\n\n  removeItem = index => event => {\n    let cartItems = cart.removeItem(index);\n    if (cartItems.length == 0) {\n      this.props.setCheckout(false);\n    }\n    this.setState({ cartItems: cartItems });\n  };\n\n  openCheckout = () => {\n    this.props.setCheckout(true);\n  };\n\n  render() {\n    const { classes } = this.props;\n    return (\n      <Card className={classes.card}>\n        <Typography type=\"title\" className={classes.title}>\n          Shopping Cart\n        </Typography>\n        {this.state.cartItems.length > 0 ? (\n          <span>\n            {this.state.cartItems.map((item, i) => {\n              return (\n                <span key={i}>\n                  <Card className={classes.cart}>\n                    <CardMedia\n                      className={classes.cover}\n                      image={\"/api/product/image/\" + item.product._id}\n                      title={item.product.name}\n                    />\n                    <div className={classes.details}>\n                      <CardContent className={classes.content}>\n                        <Link to={\"/product/\" + item.product._id}>\n                          <Typography\n                            type=\"title\"\n                            component=\"h3\"\n                            className={classes.productTitle}\n                            color=\"primary\"\n                          >\n                            {item.product.name}\n                          </Typography>\n                        </Link>\n                        <div>\n                          <Typography\n                            type=\"subheading\"\n                            component=\"h3\"\n                            className={classes.price}\n                            color=\"primary\"\n                          >\n                            $ {item.product.price}\n                          </Typography>\n                          <span className={classes.itemTotal}>\n                            ${item.product.price * item.quantity}\n                          </span>\n                          <span className={classes.itemShop}>\n                            Shop: {item.product.shop.name}\n                          </span>\n                        </div>\n                      </CardContent>\n                      <div className={classes.subheading}>\n                        Quantity:{\" \"}\n                        <TextField\n                          value={item.quantity}\n                          onChange={this.handleChange(i)}\n                          type=\"number\"\n                          inputProps={{\n                            min: 1\n                          }}\n                          className={classes.textField}\n                          InputLabelProps={{\n                            shrink: true\n                          }}\n                          margin=\"normal\"\n                        />\n                        <Button\n                          className={classes.removeButton}\n                          color=\"primary\"\n                          onClick={this.removeItem(i)}\n                        >\n                          x Remove\n                        </Button>\n                      </div>\n                    </div>\n                  </Card>\n                  <Divider />\n                </span>\n              );\n            })}\n            <div className={classes.checkout}>\n              <span className={classes.total}>Total: ${this.getTotal()}</span>\n              {!this.props.checkout &&\n                (auth.isAuthenticated() ? (\n                  <Button\n                    color=\"secondary\"\n                    variant=\"raised\"\n                    onClick={this.openCheckout}\n                  >\n                    Checkout\n                  </Button>\n                ) : (\n                  <Link to=\"/signin\">\n                    <Button color=\"primary\" variant=\"raised\">\n                      Sign in to checkout\n                    </Button>\n                  </Link>\n                ))}\n              <Link to=\"/\" className={classes.continueBtn}>\n                <Button variant=\"raised\">Continue Shopping</Button>\n              </Link>\n            </div>\n          </span>\n        ) : (\n          <Typography type=\"subheading\" component=\"h3\" color=\"primary\">\n            No items added to your cart.\n          </Typography>\n        )}\n      </Card>\n    );\n  }\n}\n\nCartItems.propTypes = {\n  classes: PropTypes.object.isRequired,\n  checkout: PropTypes.bool.isRequired,\n  setCheckout: PropTypes.func.isRequired\n};\n\nexport default withStyles(styles)(CartItems);\n"]},"metadata":{},"sourceType":"module"}