{"ast":null,"code":"import _regeneratorRuntime from \"/home/alex/Documents/CS/React/Fire Market/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/alex/Documents/CS/React/Fire Market/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/alex/Documents/CS/React/Fire Market/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/alex/Documents/CS/React/Fire Market/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/alex/Documents/CS/React/Fire Market/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/alex/Documents/CS/React/Fire Market/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/alex/Documents/CS/React/Fire Market/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/alex/Documents/CS/React/Fire Market/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/alex/Documents/CS/React/Fire Market/src/components/SubDonate/subPaymentForm.js\";\nimport React, { Component } from 'react';\nimport { CardElement, injectStripe } from 'react-stripe-elements';\nimport { Form } from 'semantic-ui-react';\nimport { withFirebase } from '../Firebase';\n\nvar SubPaymentForm =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(SubPaymentForm, _Component);\n\n  function SubPaymentForm(props) {\n    var _this;\n\n    _classCallCheck(this, SubPaymentForm);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(SubPaymentForm).call(this, props));\n    _this.state = {\n      stripeToken: '',\n      name: '',\n      email: '',\n      price: null\n    };\n\n    _this.changeHandler = function (e) {\n      _this.setState(_defineProperty({}, e.target.name, e.target.value));\n    };\n\n    _this.getStripeToken =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        var _ref2, token, payment;\n\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault(); //make the call to the NodeJs Striper Server to create the charge\n\n                _context.next = 3;\n                return _this.props.stripe.createToken({\n                  name: _this.state.name\n                });\n\n              case 3:\n                _ref2 = _context.sent;\n                token = _ref2.token;\n                payment = {\n                  token: token,\n                  amount: _this.state.price\n                };\n\n                _this.props.firebase.subscriptions().doc(_this.state.email).collection('charge').doc(payment.token.id).set(payment).then(function () {\n                  console.log('Sub successfully written!');\n                });\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    return _this;\n  }\n\n  _createClass(SubPaymentForm, [{\n    key: \"render\",\n    value: function render() {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, \"Give Monthly\"), React.createElement(Form, {\n        onSubmit: this.getStripeToken,\n        className: \"subPaymentForm\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 45\n        },\n        __self: this\n      }, React.createElement(Form.Field, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"name\",\n        onChange: this.changeHandler,\n        placeholder: \"Your Name\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 50\n        },\n        __self: this\n      })), React.createElement(Form.Field, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"email\",\n        name: \"email\",\n        onChange: this.changeHandler,\n        placeholder: \"Your Email\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      })), React.createElement(Form.Field, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        name: \"price\",\n        onChange: this.changeHandler,\n        placeholder: \"Donation in dkk\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      })), React.createElement(CardElement, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 74\n        },\n        __self: this\n      }), React.createElement(Form.Field, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }, React.createElement(\"input\", {\n        type: \"submit\",\n        value: \"Pay\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      }))));\n    }\n  }]);\n\n  return SubPaymentForm;\n}(Component);\n\nexport default withFirebase(injectStripe(SubPaymentForm));","map":{"version":3,"sources":["/home/alex/Documents/CS/React/Fire Market/src/components/SubDonate/subPaymentForm.js"],"names":["React","Component","CardElement","injectStripe","Form","withFirebase","SubPaymentForm","props","state","stripeToken","name","email","price","changeHandler","e","setState","target","value","getStripeToken","preventDefault","stripe","createToken","token","payment","amount","firebase","subscriptions","doc","collection","id","set","then","console","log"],"mappings":";;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,EAAsBC,YAAtB,QAA0C,uBAA1C;AACA,SAASC,IAAT,QAAqB,mBAArB;AAEA,SAASC,YAAT,QAA6B,aAA7B;;IAEMC,c;;;;;AACJ,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACjB,wFAAMA,KAAN;AADiB,UAInBC,KAJmB,GAIX;AACNC,MAAAA,WAAW,EAAE,EADP;AAENC,MAAAA,IAAI,EAAE,EAFA;AAGNC,MAAAA,KAAK,EAAE,EAHD;AAINC,MAAAA,KAAK,EAAE;AAJD,KAJW;;AAAA,UAWnBC,aAXmB,GAWH,UAAAC,CAAC,EAAI;AACnB,YAAKC,QAAL,qBAAiBD,CAAC,CAACE,MAAF,CAASN,IAA1B,EAAiCI,CAAC,CAACE,MAAF,CAASC,KAA1C;AACD,KAbkB;;AAAA,UAenBC,cAfmB;AAAA;AAAA;AAAA;AAAA;AAAA,+BAeF,iBAAMJ,CAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AACfA,gBAAAA,CAAC,CAACK,cAAF,GADe,CAEf;;AAFe;AAAA,uBAGO,MAAKZ,KAAL,CAAWa,MAAX,CAAkBC,WAAlB,CAA8B;AAClDX,kBAAAA,IAAI,EAAE,MAAKF,KAAL,CAAWE;AADiC,iBAA9B,CAHP;;AAAA;AAAA;AAGTY,gBAAAA,KAHS,SAGTA,KAHS;AAMTC,gBAAAA,OANS,GAMC;AAAED,kBAAAA,KAAK,EAAEA,KAAT;AAAgBE,kBAAAA,MAAM,EAAE,MAAKhB,KAAL,CAAWI;AAAnC,iBAND;;AAOf,sBAAKL,KAAL,CAAWkB,QAAX,CACGC,aADH,GAEGC,GAFH,CAEO,MAAKnB,KAAL,CAAWG,KAFlB,EAGGiB,UAHH,CAGc,QAHd,EAIGD,GAJH,CAIOJ,OAAO,CAACD,KAAR,CAAcO,EAJrB,EAKGC,GALH,CAKOP,OALP,EAMGQ,IANH,CAMQ,YAAW;AACfC,kBAAAA,OAAO,CAACC,GAAR,CAAY,2BAAZ;AACD,iBARH;;AAPe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAfE;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAElB;;;;6BA+BQ;AACP,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,EAEE,oBAAC,IAAD;AACE,QAAA,QAAQ,EAAE,KAAKf,cADjB;AAEE,QAAA,SAAS,EAAC,gBAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAIE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,IAAI,EAAC,MAFP;AAGE,QAAA,QAAQ,EAAE,KAAKL,aAHjB;AAIE,QAAA,WAAW,EAAC,WAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAJF,EAYE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,IAAI,EAAC,OADP;AAEE,QAAA,IAAI,EAAC,OAFP;AAGE,QAAA,QAAQ,EAAE,KAAKA,aAHjB;AAIE,QAAA,WAAW,EAAC,YAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CAZF,EAoBE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AACE,QAAA,IAAI,EAAC,MADP;AAEE,QAAA,IAAI,EAAC,OAFP;AAGE,QAAA,QAAQ,EAAE,KAAKA,aAHjB;AAIE,QAAA,WAAW,EAAC,iBAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CApBF,EA6BE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA7BF,EA8BE,oBAAC,IAAD,CAAM,KAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE;AAAO,QAAA,IAAI,EAAC,QAAZ;AAAqB,QAAA,KAAK,EAAC,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,CA9BF,CAFF,CADF;AAuCD;;;;EA1E0BZ,S;;AA6E7B,eAAeI,YAAY,CAACF,YAAY,CAACG,cAAD,CAAb,CAA3B","sourcesContent":["import React, { Component } from 'react';\nimport { CardElement, injectStripe } from 'react-stripe-elements';\nimport { Form } from 'semantic-ui-react';\n\nimport { withFirebase } from '../Firebase';\n\nclass SubPaymentForm extends Component {\n  constructor(props) {\n    super(props);\n  }\n\n  state = {\n    stripeToken: '',\n    name: '',\n    email: '',\n    price: null,\n  };\n\n  changeHandler = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  getStripeToken = async e => {\n    e.preventDefault();\n    //make the call to the NodeJs Striper Server to create the charge\n    let { token } = await this.props.stripe.createToken({\n      name: this.state.name,\n    });\n    const payment = { token: token, amount: this.state.price };\n    this.props.firebase\n      .subscriptions()\n      .doc(this.state.email)\n      .collection('charge')\n      .doc(payment.token.id)\n      .set(payment)\n      .then(function() {\n        console.log('Sub successfully written!');\n      });\n  };\n\n  render() {\n    return (\n      <div>\n        <h1>Give Monthly</h1>\n        <Form\n          onSubmit={this.getStripeToken}\n          className=\"subPaymentForm\"\n        >\n          <Form.Field>\n            <input\n              type=\"text\"\n              name=\"name\"\n              onChange={this.changeHandler}\n              placeholder=\"Your Name\"\n            />\n          </Form.Field>\n          <Form.Field>\n            <input\n              type=\"email\"\n              name=\"email\"\n              onChange={this.changeHandler}\n              placeholder=\"Your Email\"\n            />\n          </Form.Field>\n          <Form.Field>\n            <input\n              type=\"text\"\n              name=\"price\"\n              onChange={this.changeHandler}\n              placeholder=\"Donation in dkk\"\n            />\n          </Form.Field>\n\n          <CardElement />\n          <Form.Field>\n            <input type=\"submit\" value=\"Pay\" />\n          </Form.Field>\n        </Form>\n      </div>\n    );\n  }\n}\n\nexport default withFirebase(injectStripe(SubPaymentForm));\n"]},"metadata":{},"sourceType":"module"}